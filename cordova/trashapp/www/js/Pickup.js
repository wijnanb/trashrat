// Generated by CoffeeScript 1.6.3
(function() {
  window.Pickup = Backbone.Model.extend({
    defaults: {
      date: void 0,
      types: void 0,
      sector: void 0
    },
    initialize: function() {},
    parse: function(response, options) {
      var attributes, date, types;
      date = new Date(response.datum.replace(/(\d{2})\/(\d{2})\/(\d{4})/, '$3-$2-$1 0:00:00'));
      types = response.fractie.split('/');
      return attributes = {
        date: date,
        types: types,
        sector: response.locatie
      };
    }
  });

  window.PickupCollection = Backbone.Collection.extend({
    url: "data/ivago/inzamelkalender.json",
    sortBy: function(element) {
      return element.get('date');
    },
    initialize: function() {
      var _this = this;
      this.fetch();
      return this.on('sync', function() {
        return "ivago calendar synced";
      });
    },
    countTypes: function() {
      var types;
      types = {};
      this.each(function(element) {
        return element.get('types').forEach(function(t) {
          if (types[t] != null) {
            return types[t] += 1;
          } else {
            return types[t] = 0;
          }
        });
      });
      return types;
    },
    parse: function(response, options) {
      var results,
        _this = this;
      results = [];
      response["IVAGO-Inzamelkalender"].forEach(function(element) {
        return results.push(Pickup.prototype.parse(element));
      });
      return results;
    }
  });

}).call(this);
